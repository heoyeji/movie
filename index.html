<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>search</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- 폰트 -->
    <link
      href="https://fonts.googleapis.com/css2?family=Irish+Grover&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <h1>
        <a href="#"><img class="logo" src="img/logo.png" alt="logo" />Heoigo</a>
      </h1>
      <ul>
        <li><a href="#">인기순</a></li>
        <li><a href="#">평점순</a></li>
        <li><a href="#">개봉예정</a></li>
        <li>
          <input
            type="text"
            id="searchInput"
            placeholder="영화를 검색하세요!"
          />
          <button id="searchButton">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </li>
        <li>
          <a href="#" id="wishlistButton"><i class="fa-solid fa-user"></i></a>
        </li>
      </ul>
    </header>
    <div id="visual">
      <div class="video">
        <iframe
          width="1442"
          height="810"
          src="https://www.youtube.com/embed/MYjnA8vnEMk?autoplay=1&mute=1&controls=0&loop=1&playlist=MYjnA8vnEMk,b0yAOYIvP1Y,KsGn_DoYZfU"
          title="[가필드: 우유 원정대] 런칭 예고편"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </div>
    </div>
    <ul id="container">
      <li id="popular" class="pTop">
        <h2>
          인기순<span><a href="#">더보기 ></a></span>
        </h2>
        <ul>
          <li>
            <div class="posterhover">
              <h3 class="posttitle">movie title</h3>
              <p class="postp">영화 줄거리~</p>
              <h4 class="postrate"><i class="fa-solid fa-star"></i> n.n점</h4>
              <img src="img/가필드.jpg" alt="movie poster" />
            </div>
            <div>
              <button
                class="wishlist-button"
                data-movie-id="1"
                data-title="영화 제목"
                data-overview="영화 줄거리"
                data-poster="img/가필드.jpg"
              >
                <i class="fa-regular fa-heart"></i> 찜하기
              </button>

              <p>상세보기</p>
            </div>
          </li>
          <!-- 반복될 영화 리스트 -->
        </ul>
      </li>
      <!-- 동일한 구조의 다른 리스트들 -->
      <li id="best" class="pTop">
        <h2>
          평점순<span><a href="#">더보기 ></a></span>
        </h2>
        <ul>
          <li>
            <div class="posterhover">
              <h3 class="posttitle">movie title</h3>
              <p class="postp">영화 줄거리~</p>
              <h4 class="postrate"><i class="fa-solid fa-star"></i> n.n점</h4>
              <img src="img/가필드.jpg" alt="movie poster" />
            </div>
            <div>
              <button
                class="wishlist-button"
                data-movie-id="1"
                data-title="영화 제목"
                data-overview="영화 줄거리"
                data-poster="img/가필드.jpg"
              >
                <i class="fa-regular fa-heart"></i> 찜하기
              </button>

              <p>상세보기</p>
            </div>
          </li>
        </ul>
      </li>
      <li id="new" class="pTop pBt">
        <h2>
          개봉예정<span><a href="#">더보기 ></a></span>
        </h2>
        <ul>
          <li>
            <div class="posterhover">
              <h3 class="posttitle">movie title</h3>
              <p class="postp">영화 줄거리~</p>
              <h4 class="postrate"><i class="fa-solid fa-star"></i> n.n점</h4>
              <img src="img/가필드.jpg" alt="movie poster" />
            </div>
            <div>
              <button
                class="wishlist-button"
                data-movie-id="1"
                data-title="영화 제목"
                data-overview="영화 줄거리"
                data-poster="img/가필드.jpg"
              >
                <i class="fa-regular fa-heart"></i> 찜하기
              </button>

              <p>상세보기</p>
            </div>
          </li>
        </ul>
      </li>
    </ul>
    <div id="wishlistModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>찜 목록</h2>
        <ul id="wishlist"></ul>
        <!-- 여기에 찜 목록이 표시됩니다. -->
      </div>
    </div>

    <!-- 모달 박스 -->
    <div id="movieModal" class="modal">
      <!-- 아이디를 "movieModal"로 변경 -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <ul>
          <li><img id="modal-img" src="" alt="movie poster" /></li>
          <li>
            <h2 id="modal-title">영화 제목</h2>
            <ul class="date">
              <li>
                <p id="modal-release-date">개봉일: <span></span></p>
              </li>
              <li>
                <p id="modal-rating">
                  <i class="fa-solid fa-star"></i> <span id="modal-rate"></span>
                </p>
              </li>
            </ul>
            <ul class="info">
              <li>
                <p id="modal-genre"><span></span></p>
              </li>
              <li>
                <p id="modal-runtime"><span></span></p>
              </li>
            </ul>
            <p id="modal-overview">영화 소개</p>
          </li>
        </ul>
      </div>
    </div>

    <!-- JavaScript 코드 -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var wishlistButtons = document.querySelectorAll(".wishlist-button");
        wishlistButtons.forEach(function (button) {
          button.addEventListener("click", function () {
            var movieId = parseInt(button.dataset.movieId);
            var title = button.dataset.title;
            var overview = button.dataset.overview;
            var poster = button.dataset.poster;
            addToWishlist(movieId, title, overview, poster);
          });
        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        var heartIcons = document.querySelectorAll(".fa-heart");
        heartIcons.forEach(function (icon) {
          icon.addEventListener("click", function () {
            var button = icon.parentElement.parentElement; // 부모 요소인 <a> 태그의 부모인 <button> 태그를 찾음
            var movieId = parseInt(button.dataset.movieId);
            var title = button.dataset.title;
            var overview = button.dataset.overview;
            var poster = button.dataset.poster;
            addToWishlist(movieId, title, overview, poster);
          });
        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        // 찜 목록 버튼에 클릭 이벤트 리스너 추가
        var wishlistButton = document.getElementById("wishlistButton");
        wishlistButton.addEventListener("click", openWishlistModal);

        // 찜 목록에 영화 추가
        addToWishlist(1, "영화 제목", "영화 줄거리", "img/영화포스터.jpg");
      });
    </script>

    <script src="js/custom.js"></script>
    <script src="js/search.js"></script>
    <script src="js/likelist.js"></script>
  </body>
</html>
